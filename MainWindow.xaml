<Window x:Class="ModTranslator.MainTranslatorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ModTranslator"
        mc:Ignorable="d"
        Title="Warband mod translator" Height="768" Width="1366">

    <Grid x:Name="grid">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="15*"/>
            <ColumnDefinition Width="668*"/>
            <ColumnDefinition Width="668*"/>
        </Grid.ColumnDefinitions>

        <TextBox x:Name="ModPathText" Margin="0,37,0,0" TextWrapping="NoWrap" Text="Путь к папке с модом" AcceptsReturn="False" VerticalAlignment="Top" Height="25" Grid.Column="1" HorizontalAlignment="Left" Width="471" KeyDown ="ModPathText_KeyDown"/>

        <Button x:Name="OpenModButton" Content="Откр. мод" Margin="486,37,0,0" VerticalAlignment="Top" Height="25" Grid.Column="1" HorizontalAlignment="Left" Width="67" Click="OpenModButton_Click"/>

        <ComboBox x:Name="SelectFilesBox" ToolTip="Список игровых категорий" Margin="570,37,0,0" VerticalAlignment="Top" Height="25" IsEnabled="False" SelectedIndex="0" Grid.Column="1" HorizontalAlignment="Left" Width="180" SelectionChanged="SelectFilesBox_SelectionChanged" Grid.ColumnSpan="2"/>

        <DataGrid x:Name="MainDataGrid" 
                  Margin="15,121,15,15" 
                  AutoGenerateColumns="false" 
                  Grid.ColumnSpan="3" 
                  ColumnWidth="*" 
                  SelectionMode="Single" 
                  SelectionUnit="Cell" 
                  CanUserDeleteRows="False" 
                  CanUserAddRows="False" 
                  CanUserResizeRows="True" 
                  FontSize="14"
                  ContextMenuOpening="DataGridContextMenuOpening" 
                  BeginningEdit="DataGridCellBegining"
                  CellEditEnding="DataGridCellEditEnding"
                  SelectedCellsChanged ="DataGridSelectedCellsChanged"
                  Sorting="MainDataGrid_Sorting"
                  LoadingRow="MainDataGrid_LoadingRow">

            <DataGrid.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Сохранить столбец" Click="DataGridMenuSaveAs_Click" />
                    <Separator/>
                    <MenuItem Header="Загрузить столбец" Click="DataGridMenuImport_Click" />
                </ContextMenu>
            </DataGrid.ContextMenu>

            <DataGrid.Columns>

                <DataGridTextColumn Header="№" Binding="{Binding RowNum, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="40" MaxWidth ="60"  CanUserSort="true" CanUserReorder="False" IsReadOnly="false" Visibility="Visible">

                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextAlignment" Value="Center"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>

                    <DataGridTextColumn.EditingElementStyle>
                        <Style TargetType="{x:Type TextBox}">
                            <Setter Property="IsReadOnly" Value="True"/>
                            <Setter Property="TextAlignment" Value="Center"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.EditingElementStyle>

                </DataGridTextColumn>

                <DataGridTextColumn Header="ID" Binding="{Binding RowId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="200" CanUserSort="False" CanUserReorder="False" IsReadOnly="false" Visibility="Visible">

                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>

                    <DataGridTextColumn.EditingElementStyle>
                        <Style TargetType="{x:Type TextBox}">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                            <Setter Property="IsReadOnly" Value="True"/>
                        </Style>
                    </DataGridTextColumn.EditingElementStyle>

                </DataGridTextColumn>

                <DataGridTextColumn Header="Оригинал" Binding="{Binding OriginalText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  Width="*" IsReadOnly="False" CanUserSort="False" CanUserReorder="False" FontSize="14" CanUserResize="True">

                    <DataGridTextColumn.ElementStyle>
                        <Style>
                            <Setter Property="TextBlock.TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>

                    <DataGridTextColumn.EditingElementStyle>
                        <Style TargetType="{x:Type TextBox}">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                            <Setter Property="AcceptsReturn" Value="True"/>
                            <Setter Property="IsReadOnly" Value="True"/>
                        </Style>
                    </DataGridTextColumn.EditingElementStyle>

                </DataGridTextColumn>

                <DataGridTextColumn Header="Перевод" Binding="{Binding TranslatedText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="*" IsReadOnly="False" CanUserSort="False" CanUserReorder="False" FontSize="14" CanUserResize="True">

                    <DataGridTextColumn.ElementStyle>
                        <Style>
                            <Setter Property="TextBlock.TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>

                    <DataGridTextColumn.EditingElementStyle>
                        <Style TargetType="{x:Type TextBox}">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                            <Setter Property="AcceptsReturn" Value="True"/>
                        </Style>
                    </DataGridTextColumn.EditingElementStyle>

                </DataGridTextColumn>

            </DataGrid.Columns>
        </DataGrid>

        <Button x:Name="SaveButton" Grid.Column="2" Content="Экспорт перевода" Margin="0,37,15,0" VerticalAlignment="Top" Height="31" HorizontalAlignment="Right" Width="110" IsEnabled="False" Click="SaveButton_Click"/>

        <Button x:Name="ImportButton" Grid.Column="2" Content="Импорт перевода" Margin="0,37,151,0" VerticalAlignment="Top" Height="31" HorizontalAlignment="Right" Width="110" IsEnabled="False" Click="ImportButton_Click"/>

        <Label x:Name="TranslateCount" Content="Всего: 0 | Cкрыто: 0 | Переведено: 0" ToolTip="Скрытые строки могут быть переведены." HorizontalAlignment="Left" Margin="105,81,0,0" VerticalAlignment="Top" Width="366" FontSize="11" Height="25" Grid.Column="1"/>

        <Button x:Name="NextCellButton" Content="След." ToolTip="Перейти к следующей непереведённой строке" HorizontalAlignment="Left" Margin="55,81,0,0" VerticalAlignment="Top" Height="25" Width="40" Grid.Column="1" IsEnabled="False" Click="NextCellButton_Click"/>

        <Button x:Name="PrevCellButton" Content="Пред." ToolTip="Перейти к предыдущей непереведённой строке"  HorizontalAlignment="Left" Margin="0,81,0,0" VerticalAlignment="Top" Width="40" Height="25" Grid.Column="1" IsEnabled="False" Click="PrevCellButton_Click"/>

        <Menu x:Name="MainMenu" Grid.ColumnSpan="3" Height="20" VerticalAlignment="Top" Background="{Binding ElementName=grid, Mode=OneWay}">

            <MenuItem x:Name="SettingsMenu" Margin="10,0,0,0" Header="Настройки" HorizontalAlignment="Left" VerticalAlignment="Top" Click="SettingsMenu_Click"/>

            <MenuItem x:Name="SearchMenu" Header="Поиск" ToolTip="Ctrl + F"  Click="SearchMenu_Click"/>

            <MenuItem x:Name="AboutMenu" Header="?" Click="AboutMenu_Click"/>

        </Menu>

    </Grid>
</Window>
